<h1>[# {{empire_id}}] {{empire.displayName}}</h1>
<p><b>Email: </b> {{empire.emailAddr}}</p>
<p><b>State: </b> {{empire.state}}</p>
<p><b>Cash: </b> ${{empire.cash}}</p>
{% if empire.rank != null %}
<p><b>Rank: </b> <b>{{ empire.rank.rank }}</b>
  Stars: {{ empire.rank.totalStars }}
  Colonies: {{ empire.rank.totalColonies }}
  Ships: {{ empire.rank.totalShips }}
  Building: {{ empire.rank.totalBuildings }}
  Population: {{ empire.rank.totalPopulation }}</p>
{% end %}

<p><b>Home star</b></p>
{% if empire.homeStar != null %}
<p>{{ empire.homeStar.name }}</p>
{% else %}
<p><em>None</em></p>
{% end %}

<p><b>Alliance</b></p>
{% if empire.alliance != null %}
<p>{{ empire.alliance.name }}</p>
{% else %}
<p><em>None</em></p>
{% end %}

<div id="requestsGraph" style="width: 100%; margin: 0 auto;"></div>
<script type="text/javascript">
  // keep the width/height ratio of the graph nice
  var ratio = 0.333;
  $("#requestsGraph").css("height", $("#requestsGraph").width() * ratio);

  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);

  function drawChart() {
    var dataTable = new google.visualization.DataTable();
    dataTable.addColumn("datetime", "Date");
    dataTable.addColumn("number", "Total requests");
    dataTable.addColumn("number", "{{empire.displayName}}");
    dataTable.addRows([
    {% for entry in request_graph %}
      [
        new Date({{ entry.date.getMillis() }}),
        {{ entry.total }},
        {{ entry.empireRequests }}
      ],
    {% end %}
    ]);

    var dataView = new google.visualization.DataView(dataTable);

    var width = $("#requestsGraph").width();
    var height = $("#requestsGraph").height();
    var options = {
      "chartArea": {left: 50, top: 10, width: width - 200, height: height - 80},
      "backgroundColor": {fill: "transparent"}
    };

    var chart = new google.visualization.LineChart(document.getElementById("requestsGraph"));
    chart.draw(dataView, options);

  }
</script>
